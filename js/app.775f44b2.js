(function(e){function t(t){for(var a,n,i=t[0],l=t[1],u=t[2],m=0,d=[];m<i.length;m++)n=i[m],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&d.push(s[n][0]),s[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);c&&c(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,i=1;i<r.length;i++){var l=r[i];0!==s[l]&&(a=!1)}a&&(o.splice(t--,1),e=n(n.s=r[0]))}return e}var a={},s={app:0},o=[];function n(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=a,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=l;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0151":function(e,t,r){},"01dd":function(e,t,r){"use strict";r("0151")},"020b":function(e,t,r){"use strict";r("e558")},"0677":function(e,t,r){"use strict";r("3eda")},"083f":function(e,t,r){},"15c4":function(e,t,r){"use strict";r("083f")},"2fb3":function(e,t,r){},"3eda":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("router-view")},o=[],n={name:"App"},i=n,l=r("2877"),u=Object(l["a"])(i,s,o,!1,null,null,null),c=u.exports,m=r("8c4f"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login_container"},[r("div",{staticClass:"login_box"},[e._m(0),r("el-form",{ref:"loginFormRef",staticClass:"login_form",attrs:{"label-width":"60px",model:e.loginForm,rules:e.loginFormRules}},[r("el-form-item",{attrs:{label:"账号",prop:"number"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-user-solid"},model:{value:e.loginForm.number,callback:function(t){e.$set(e.loginForm,"number",t)},expression:"loginForm.number"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-lock","show-password":""},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),r("el-form-item",{staticClass:"btns"},[r("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")]),r("el-button",{attrs:{type:"info"},on:{click:e.Register}},[e._v("注册")])],1)],1)],1)])},p=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"avatar_box"},[a("img",{attrs:{src:r("cf05"),alt:""}})])}],g=r("1da1"),f=(r("96cf"),r("ac1f"),r("00b4"),r("d9e2"),{name:"Login",data:function(){var e=function(e,t,r){var a=/^\d{13}$/;if(a.test(t))return r();r(new Error("请输入正确的13位学号"))};return{loginForm:{number:"",password:""},loginFormRules:{number:[{required:!0,message:"请输入账号",trigger:"blur"},{validator:e,trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在 3 到 5 个字符",trigger:"blur"}]}}},methods:{login:function(){var e=this;this.$refs.loginFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("login",e.loginForm);case 4:a=t.sent,s=a.data,console.log(s.meta.status),202==s.meta.status?e.$message.error("用户不存在"):203==s.meta.status?e.$message.error("密码错误"):200==s.meta.status&&(e.$message.success("登录成功！"),window.sessionStorage.setItem("token",s.token),window.sessionStorage.setItem("number",s.data[0].number),window.sessionStorage.setItem("status",s.data[0].status),e.$router.push("/Home"));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},Register:function(){this.$router.push("/Register")}}}),b=f,h=(r("6990"),Object(l["a"])(b,d,p,!1,null,"c2321eca",null)),v=h.exports,w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"Register_container"},[r("el-card",{staticClass:"box-card card"},[r("div",{staticClass:"Register_header"},[e._v("注册")]),r("el-form",{ref:"registerRef",staticClass:"divForm",attrs:{model:e.registerForm,rules:e.registerRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"头像"}},[r("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{action:e.actionUrl,"show-file-list":!1,limit:1,"on-change":e.handlePreview,accept:".jpg,.png",multiple:!1,"auto-upload":!1}},[e.imageUrl?r("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"姓名",prop:"name"}},[r("el-input",{staticStyle:{width:"30%"},model:{value:e.registerForm.name,callback:function(t){e.$set(e.registerForm,"name",t)},expression:"registerForm.name"}})],1),r("el-form-item",{attrs:{label:"性别",prop:"sex"}},[r("el-radio-group",{model:{value:e.registerForm.sex,callback:function(t){e.$set(e.registerForm,"sex",t)},expression:"registerForm.sex"}},[r("el-radio",{attrs:{label:"男"}}),r("el-radio",{attrs:{label:"女"}})],1)],1),r("el-form-item",{attrs:{label:"学号",prop:"number"}},[r("el-input",{staticStyle:{width:"30%"},model:{value:e.registerForm.number,callback:function(t){e.$set(e.registerForm,"number",t)},expression:"registerForm.number"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{staticStyle:{width:"30%"},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),r("el-form-item",{attrs:{label:"电话",prop:"telephone"}},[r("el-input",{staticStyle:{width:"30%"},model:{value:e.registerForm.telephone,callback:function(t){e.$set(e.registerForm,"telephone",t)},expression:"registerForm.telephone"}})],1),r("el-form-item",{attrs:{label:"现住址",prop:"address"}},[r("el-input",{staticStyle:{width:"50%"},model:{value:e.registerForm.address,callback:function(t){e.$set(e.registerForm,"address",t)},expression:"registerForm.address"}})],1),r("el-form-item",{attrs:{label:"职称",prop:"title"}},[r("el-input",{staticStyle:{width:"40%"},model:{value:e.registerForm.title,callback:function(t){e.$set(e.registerForm,"title",t)},expression:"registerForm.title"}})],1),r("el-form-item",{attrs:{label:"公司名称",prop:"company"}},[r("el-input",{staticStyle:{width:"50%"},model:{value:e.registerForm.company,callback:function(t){e.$set(e.registerForm,"company",t)},expression:"registerForm.company"}})],1),r("el-form-item",{attrs:{label:"公司地址",prop:"work_address"}},[r("el-input",{staticStyle:{width:"50%"},model:{value:e.registerForm.work_address,callback:function(t){e.$set(e.registerForm,"work_address",t)},expression:"registerForm.work_address"}})],1),r("el-form-item",{attrs:{label:"学院和班级",prop:"collegeClass"}},[r("div",{staticClass:"block"},[r("el-cascader",{attrs:{options:e.options,props:{checkStrictly:!0},clearable:""},model:{value:e.registerForm.collegeClass,callback:function(t){e.$set(e.registerForm,"collegeClass",t)},expression:"registerForm.collegeClass"}})],1)]),r("el-form-item",{attrs:{label:"毕业时间",prop:"time"}},[r("el-col",{attrs:{span:11}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.registerForm.time,callback:function(t){e.$set(e.registerForm,"time",t)},expression:"registerForm.time"}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即创建")])],1)],1)],1)],1)},F=[],x=(r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),r("9861"),{created:function(){this.getOptions()},name:"Register",data:function(){var e=function(e,t,r){var a=/^[\u4e00-\u9fa5]{2,6}$/;if(a.test(t))return r();r(new Error("请输入2~6位中文"))},t=function(e,t,r){var a=/^\d{13}$/;if(a.test(t))return r();r(new Error("请输入正确的13位学号"))},r=function(e,t,r){var a=/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/;if(a.test(t))return r();r(new Error("请输入正确的电话号码"))};return{registerForm:{name:"",sex:"男",number:"",password:"",telephone:"",address:"",title:"",company:"",work_address:"",collegeClass:[],time:""},registerRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"},{validator:e,trigger:"blur"}],sex:[{required:!0,message:"请输入账号",trigger:"blur"}],number:[{required:!0,message:"请输入账号",trigger:"blur"},{validator:t,trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在6 到 16 个字符",trigger:"blur"}],telephone:[{required:!0,message:"请输入电话",trigger:"blur"},{validator:r,trigger:"blur"}],address:[{required:!0,message:"请输入地址",trigger:"blur"}],title:[{required:!0,message:"请输入职称",trigger:"blur"},{min:2,max:16,message:"长度在 2 到16 个字符",trigger:"blur"}],company:[{required:!0,message:"请输入公司名称",trigger:"blur"}],work_address:[{required:!0,message:"请输入工作地址",trigger:"blur"}],collegeClass:[{required:!0,message:"请选择学院和班级",trigger:"blur"}],time:[{required:!0,message:"请选择毕业时间",trigger:"blur"}]},imageUrl:"",actionUrl:"http://127.0.0.1:5001/Register/upload",options:[]}},methods:{getOptions:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/Options");case 2:r=t.sent,a=r.data,e.options=a.data;case 5:case"end":return t.stop()}}),t)})))()},handlePreview:function(e,t){var r=new Blob([t.row]);this.imageUrl=URL.createObjectURL(r),this.dialogImageUrl=this.imageUrl},onSubmit:function(){var e=this;this.$refs.registerRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("/Register",e.registerForm);case 4:a=t.sent,s=a.data,202==s.meta.status?e.$message.error("用户已存在"):201==s.meta.status?e.$message.error("注册失败"):(e.$message.success("注册成功"),e.$refs.upload.submit(),e.registerForm={});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}}),y=x,k=(r("b0d3"),Object(l["a"])(y,w,F,!1,null,"44a0d41c",null)),$=k.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"home_container"},[a("el-header",[a("div",[a("img",{attrs:{src:r("cf05"),alt:""}}),a("span",[e._v("校友服务管理系统")])]),a("el-button",{attrs:{type:"info"},on:{click:e.logout}},[e._v("退出")])],1),a("el-container",[a("el-aside",{attrs:{width:"isCollapse ? '64px':'200px'"}},[a("div",{staticClass:"toggle_button",on:{click:e.toggleCollapse}},[e._v("|||")]),a("el-menu",{attrs:{"background-color":"#333744","text-color":"#fff","active-text-color":"#4091ff","unique-opened":"",collapse:e.isCollapse,"collapse-transition":!1,router:"","default-active":e.activePath}},e._l(e.menuList,(function(t){return a("el-submenu",{key:t.id,attrs:{index:t.id+""}},[a("template",{slot:"title"},[a("i",{class:e.iconsObject[t.id]}),a("span",[e._v(e._s(t.authName))])]),e._l(t.children,(function(t){return a("el-menu-item",{key:t.id,attrs:{index:"/"+t.path},on:{click:function(r){return e.saveNavState("/"+t.path)}}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),a("span",[e._v(e._s(t.authName))])])],2)}))],2)})),1)],1),a("el-main",[a("router-view")],1)],1)],1)},_=[],R={created:function(){this.getMenuList(),this.activePath=window.sessionStorage.getItem("activePath")},name:"Home",data:function(){return{menuList:[],iconsObject:{101:"el-icon-chat-round",102:"el-icon-s-custom",103:"el-icon-edit-outline",104:"el-icon-loading",105:"el-icon-magic-stick"},isCollapse:!1,activePath:""}},methods:{logout:function(){window.sessionStorage.clear(),this.$router.push("./Login")},getMenuList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={status:window.sessionStorage.getItem("status")},t.next=3,e.$http.get("menus",{params:r});case 3:if(a=t.sent,s=a.data,console.log(s),200===s.status){t.next=8;break}return t.abrupt("return",e.$message.error("获取菜单失败"));case 8:e.menuList=s.data;case 9:case"end":return t.stop()}}),t)})))()},toggleCollapse:function(){this.isCollapse=!this.isCollapse},saveNavState:function(e){window.sessionStorage.setItem("activePath",e),this.activePath=e}}},q=R,C=(r("020b"),Object(l["a"])(q,S,_,!1,null,"a9f4925e",null)),U=C.exports,j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/Home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("校友用户管理")]),r("el-breadcrumb-item",[e._v("用户列表")])],1),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:7}},[r("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getUserList},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUserList},slot:"append"})],1)],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加用户")])],1)],1),r("el-table",{attrs:{data:e.usersList,border:"",stripe:""}},[r("el-table-column",{attrs:{label:"#",type:"index"}}),r("el-table-column",{attrs:{label:"姓名",prop:"name"}}),r("el-table-column",{attrs:{label:"学院",prop:"college"}}),r("el-table-column",{attrs:{label:"班级",prop:"class"}}),r("el-table-column",{attrs:{label:"电话",prop:"telephone"}}),r("el-table-column",{attrs:{label:"工作职称",prop:"title"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{effect:"dark",content:"修改",placement:"top-start",enterable:!1}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditDialog(t.row.number)}}})],1),r("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"top-start",enterable:!1}},[r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.removeUserByNumber(t.row.number)}}})],1),r("el-tooltip",{attrs:{effect:"dark",content:"分配角色",placement:"top-start",enterable:!1}},[r("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(r){return e.changeUserByNumber(t.row.number)}}})],1)]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[1,2,5,10],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"添加用户",visible:e.addDialogVisible,width:"30%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[r("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"name"}},[r("el-input",{model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),r("el-form-item",{attrs:{label:"学院",prop:"college"}},[r("el-input",{model:{value:e.addForm.college,callback:function(t){e.$set(e.addForm,"college",t)},expression:"addForm.college"}})],1),r("el-form-item",{attrs:{label:"班级",prop:"class"}},[r("el-input",{model:{value:e.addForm.class,callback:function(t){e.$set(e.addForm,"class",t)},expression:"addForm.class"}})],1),r("el-form-item",{attrs:{label:"电话",prop:"telephone"}},[r("el-input",{model:{value:e.addForm.telephone,callback:function(t){e.$set(e.addForm,"telephone",t)},expression:"addForm.telephone"}})],1),r("el-form-item",{attrs:{label:"工作职称",prop:"title"}},[r("el-input",{model:{value:e.addForm.title,callback:function(t){e.$set(e.addForm,"title",t)},expression:"addForm.title"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"修改用户",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editDialogClosed}},[r("el-form",{ref:"editFormRef",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"账号",prop:"number"}},[r("el-input",{attrs:{disabled:""},model:{value:e.editForm.number,callback:function(t){e.$set(e.editForm,"number",t)},expression:"editForm.number"}})],1),r("el-form-item",{attrs:{label:"用户名",prop:"name"}},[r("el-input",{model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),r("el-form-item",{attrs:{label:"学院",prop:"college"}},[r("el-input",{model:{value:e.editForm.college,callback:function(t){e.$set(e.editForm,"college",t)},expression:"editForm.college"}})],1),r("el-form-item",{attrs:{label:"班级",prop:"class"}},[r("el-input",{model:{value:e.editForm.class,callback:function(t){e.$set(e.editForm,"class",t)},expression:"editForm.class"}})],1),r("el-form-item",{attrs:{label:"电话",prop:"telephone"}},[r("el-input",{model:{value:e.editForm.telephone,callback:function(t){e.$set(e.editForm,"telephone",t)},expression:"editForm.telephone"}})],1),r("el-form-item",{attrs:{label:"工作职称",prop:"title"}},[r("el-input",{model:{value:e.editForm.title,callback:function(t){e.$set(e.editForm,"title",t)},expression:"editForm.title"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editUserInfo()}}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"分配角色",visible:e.changeDialogVisible,width:"30%"},on:{"update:visible":function(t){e.changeDialogVisible=t}}},[r("el-form",{ref:"changeFormRef",attrs:{model:e.changeForm,"label-width":"80px"}},[r("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"姓名"}},[r("el-input",{attrs:{disabled:""},model:{value:e.changeForm.name,callback:function(t){e.$set(e.changeForm,"name",t)},expression:"changeForm.name"}})],1),r("el-form-item",{attrs:{label:"角色分配"}},[r("el-select",{attrs:{placeholder:"普通用户"},model:{value:e.changeForm.status,callback:function(t){e.$set(e.changeForm,"status",t)},expression:"changeForm.status"}},[r("el-option",{attrs:{label:"普通用户",value:"普通用户"}}),r("el-option",{attrs:{label:"管理员",value:"管理员"}})],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.changeDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleChange}},[e._v("确 定")])],1)],1)],1)},L=[],O=(r("b0c0"),{created:function(){this.getUserList()},name:"UserFirst",data:function(){return{queryInfo:{query:"",pageNum:1,pageSize:2},usersList:[],total:0,addDialogVisible:!1,addForm:{name:"",college:"",class:"",telephone:"",title:""},addFormRules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:4,message:"用户名长度在2~4之间",trigger:"blur"}],college:[{required:!0,message:"请输入学院",trigger:"blur"}],class:[{required:!0,message:"请输入班级",trigger:"blur"}],telephone:[{required:!0,message:"请输入电话",trigger:"blur"}],title:[{required:!0,message:"请输入工作职称",trigger:"blur"}]},editDialogVisible:!1,editForm:{name:"",college:"",class:"",telephone:"",title:""},editFormRules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:4,message:"用户名长度在2~4之间",trigger:"blur"}],college:[{required:!0,message:"请输入学院",trigger:"blur"}],class:[{required:!0,message:"请输入班级",trigger:"blur"}],telephone:[{required:!0,message:"请输入电话",trigger:"blur"}],title:[{required:!0,message:"请输入工作职称",trigger:"blur"}]},changeDialogVisible:!1,changeForm:{}}},methods:{getUserList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/Home/userFirst",{params:e.queryInfo});case 2:if(r=t.sent,a=r.data,200===a.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("用户列表获取失败"));case 6:e.usersList=a.data,e.total=a.total;case 8:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){console.log(e),this.queryInfo.pageSize=e,this.getUserList(),console.log(this.queryInfo.pageSize)},handleCurrentChange:function(e){console.log(e),this.queryInfo.pageNum=e,this.getUserList()},addDialogClosed:function(){this.$refs.addFormRef.resetFields()},addUser:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("/Home/userFirst",e.addForm);case 4:if(a=t.sent,s=a.data,201===s.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("添加用户失败"));case 8:e.$message.success("添加用户成功"),e.addDialogVisible=!1,e.getUserList();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},editDialogClosed:function(){this.$refs.editFormRef.resetFields()},showEditDialog:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.editDialogVisible=!0,r.next=3,t.$http.get("/Home/userFirst/"+e);case 3:if(a=r.sent,s=a.data,200!=!s.meta.status){r.next=7;break}return r.abrupt("return",t.$message.error("查询用户信息失败"));case 7:t.editForm=s.data[0];case 8:case"end":return r.stop()}}),r)})))()},editUserInfo:function(){var e=this;this.$refs.editFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.put("/Home/userFirst/"+e.editForm.number,{number:e.editForm.number,name:e.editForm.name,college:e.editForm.college,class:e.editForm.class,telephone:e.editForm.telephone,title:e.editForm.title});case 4:if(a=t.sent,s=a.data,200===s.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("修改用户信息失败"));case 8:e.$message.success("修改用户信息成功");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.editDialogVisible=!1,this.getUserList()},removeUserByNumber:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(a=r.sent,"confirm"===a){r.next=5;break}return r.abrupt("return",t.$message.info("已经取消删除"));case 5:return r.next=7,t.$http.delete("/Home/userFirst/"+e);case 7:if(s=r.sent,o=s.data,200===o.meta.status){r.next=11;break}return r.abrupt("return",t.$message.error("删除用户失败"));case 11:t.$message.success("删除用户成功"),t.getUserList();case 13:case"end":return r.stop()}}),r)})))()},changeUserByNumber:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.changeDialogVisible=!0,r.next=3,t.$http.get("/Home/userFirst/"+e);case 3:if(a=r.sent,s=a.data,200===s.meta.status){r.next=7;break}return r.abrupt("return",t.$message.error("用户查询失败"));case 7:t.$message.success("用户查询成功"),t.changeForm=s.data[0];case 9:case"end":return r.stop()}}),r)})))()},handleChange:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.changeForm.number,e.changeForm.status),t.next=3,e.$http.put("/Home/userFirst/up",{number:e.changeForm.number,status:e.changeForm.status});case 3:if(r=t.sent,a=r.data,200===a.meta.status){t.next=7;break}return t.abrupt("return",e.$message.error("用户权限修改失败"));case 7:e.$message.success("用户权限修改成功"),window.sessionStorage.setItem("status",e.changeForm.status),e.changeDialogVisible=!1;case 10:case"end":return t.stop()}}),t)})))()}}}),I=O,D=Object(l["a"])(I,j,L,!1,null,"45a0b580",null),z=D.exports,H=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/Home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("校友用户管理")]),r("el-breadcrumb-item",[e._v("个人中心")])],1),r("div",{staticClass:"cardBox"},[r("el-card",{staticClass:"card-left"},[r("el-form",{ref:"registerRef",attrs:{model:e.updateForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"头像"}},[r("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{action:e.actionUrl,"show-file-list":!1,limit:1,"on-change":e.handlePreview,accept:".jpg,.png",multiple:!1,"auto-upload":!1}},[e.imageUrl?r("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"姓名"}},[r("el-input",{staticStyle:{width:"30%"},attrs:{disabled:e.disabled1},model:{value:e.updateForm.name,callback:function(t){e.$set(e.updateForm,"name",t)},expression:"updateForm.name"}})],1),r("el-form-item",{attrs:{label:"学号"}},[r("el-input",{staticStyle:{width:"30%"},attrs:{disabled:""},model:{value:e.updateForm.number,callback:function(t){e.$set(e.updateForm,"number",t)},expression:"updateForm.number"}})],1),r("el-form-item",{attrs:{label:"密码"}},[r("el-input",{staticStyle:{width:"30%"},attrs:{disabled:e.disabled1},model:{value:e.updateForm.password,callback:function(t){e.$set(e.updateForm,"password",t)},expression:"updateForm.password"}})],1),r("el-form-item",{attrs:{label:"电话"}},[r("el-input",{staticStyle:{width:"30%"},attrs:{disabled:e.disabled1},model:{value:e.updateForm.telephone,callback:function(t){e.$set(e.updateForm,"telephone",t)},expression:"updateForm.telephone"}})],1),r("el-form-item",{attrs:{label:"现住址"}},[r("el-input",{staticStyle:{width:"30%"},attrs:{disabled:e.disabled1},model:{value:e.updateForm.address,callback:function(t){e.$set(e.updateForm,"address",t)},expression:"updateForm.address"}})],1),r("el-form-item",{attrs:{label:"职称"}},[r("el-input",{staticStyle:{width:"30%"},attrs:{disabled:e.disabled1},model:{value:e.updateForm.title,callback:function(t){e.$set(e.updateForm,"title",t)},expression:"updateForm.title"}})],1),r("el-form-item",{attrs:{label:"公司名称"}},[r("el-input",{staticStyle:{width:"50%"},attrs:{disabled:e.disabled1},model:{value:e.updateForm.company,callback:function(t){e.$set(e.updateForm,"company",t)},expression:"updateForm.company"}})],1),r("el-form-item",{attrs:{label:"公司地址"}},[r("el-input",{staticStyle:{width:"50%"},attrs:{disabled:e.disabled1},model:{value:e.updateForm.work_address,callback:function(t){e.$set(e.updateForm,"work_address",t)},expression:"updateForm.work_address"}})],1),r("el-form-item",{attrs:{label:"学院和班级"}},[r("div",{staticClass:"block"},[r("el-cascader",{attrs:{options:e.options,props:{checkStrictly:!0},clearable:"",disabled:e.disabled1},model:{value:e.updateForm.collegeClass,callback:function(t){e.$set(e.updateForm,"collegeClass",t)},expression:"updateForm.collegeClass"}})],1)]),r("el-form-item",{attrs:{label:"毕业时间"}},[r("el-col",{attrs:{span:11}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",disabled:e.disabled1},model:{value:e.updateForm.time,callback:function(t){e.$set(e.updateForm,"time",t)},expression:"updateForm.time"}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"warning"},on:{click:e.change}},[e._v("修改")])],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即创建")])],1)],1)],1),r("el-card",{staticClass:"card-right"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{type:"index",label:"#",width:"180"}}),r("el-table-column",{attrs:{prop:"date1",label:"日期",width:"180"}}),r("el-table-column",{attrs:{prop:"name",label:"活动名称",width:"180"}}),r("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:"未通过"===t.row.status?"danger":"success",effect:"dark","disable-transitions":""}},[e._v(e._s(t.row.status))])]}}])})],1)],1)],1)],1)},V=[],N={created:function(){this.getUserInfo(),this.getOptions(),this.getRequestInfo()},name:"UserSecond",data:function(){return{updateForm:{name:"",number:"",password:"",telephone:"",address:"",title:"",company:"",work_address:"",collegeClass:[],time:""},disabled1:!0,imageUrl:"",actionUrl:"http://127.0.0.1:5001/Home/stateSecond/upload",options:[],tableData:[]}},methods:{getOptions:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/Options");case 2:r=t.sent,a=r.data,e.options=a.data;case 5:case"end":return t.stop()}}),t)})))()},getUserInfo:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=window.sessionStorage.getItem("number"),t.next=3,e.$http.get("/Home/UserSecond/"+r);case 3:a=t.sent,s=a.data,200!==s.meta.status?e.$message.error("获取信息失败"):(e.updateForm=s.data[0],e.updateForm.collegeClass=[],e.updateForm.collegeClass.push(s.data[0].college),e.updateForm.collegeClass.push(s.data[0].class),e.imageUrl="http://127.0.0.1:5001/upload/pic/pic2/"+s.data[0].photo,console.log(e.imageUrl),e.$message.success("获取信息成功"));case 6:case"end":return t.stop()}}),t)})))()},change:function(){this.disabled1=!1},handlePreview:function(e,t){var r=new Blob([t.row]);this.imageUrl=URL.createObjectURL(r),this.dialogImageUrl=this.imageUrl},onSubmit:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.put("/Home/UserSecond/up/"+e.updateForm.number,e.updateForm);case 2:r=t.sent,a=r.data,200!==a.meta.status?e.$message.error("修改失败"):(e.$message.success("修改成功"),e.disabled1=!0,e.$refs.upload.submit());case 5:case"end":return t.stop()}}),t)})))()},getRequestInfo:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=window.sessionStorage.getItem("number"),t.next=3,e.$http.get("/Home/requestSecond/user/"+r);case 3:if(a=t.sent,s=a.data,200===s.meta.status){t.next=7;break}return t.abrupt("return",e.$message.err("查询申请失败"));case 7:console.log(s.data),e.tableData=s.data;case 9:case"end":return t.stop()}}),t)})))()}}},E=N,B=(r("01dd"),Object(l["a"])(E,H,V,!1,null,"00b60274",null)),P=B.exports,T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/Home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("校友申请管理")]),r("el-breadcrumb-item",[e._v("校友申请")])],1),r("el-card",{staticClass:"box-card"},[r("el-form",{ref:"formRef",attrs:{model:e.form,rules:e.formRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"活动名称",prop:"name",required:""}},[r("el-input",{staticStyle:{width:"40%"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"负责人",prop:"user",required:""}},[r("el-input",{staticStyle:{width:"40%"},model:{value:e.form.user,callback:function(t){e.$set(e.form,"user",t)},expression:"form.user"}})],1),r("el-form-item",{attrs:{label:"电话",prop:"telephone",required:""}},[r("el-input",{staticStyle:{width:"40%"},model:{value:e.form.telephone,callback:function(t){e.$set(e.form,"telephone",t)},expression:"form.telephone"}})],1),r("el-form-item",{attrs:{label:"活动区域",prop:"region",required:""}},[r("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},[r("el-option",{attrs:{label:"旧校区",value:"旧校区"}}),r("el-option",{attrs:{label:"新校区",value:"新校区"}})],1)],1),r("el-form-item",{attrs:{label:"活动时间",required:""}},[r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{prop:"date1"}},[r("el-date-picker",{staticStyle:{width:"90%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.form.date1,callback:function(t){e.$set(e.form,"date1",t)},expression:"form.date1"}})],1)],1),r("el-col",{staticClass:"line date_w",attrs:{span:2}},[e._v("-")]),r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{prop:"date2"}},[r("el-time-picker",{staticStyle:{width:"90%"},attrs:{placeholder:"选择时间","value-format":"HH:mm:ss"},model:{value:e.form.date2,callback:function(t){e.$set(e.form,"date2",t)},expression:"form.date2"}})],1)],1)],1),r("el-form-item",{attrs:{label:"活动性质",prop:"type",required:""}},[r("el-radio-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[r("el-radio",{attrs:{label:"申请入校"}}),r("el-radio",{attrs:{label:"线上活动"}}),r("el-radio",{attrs:{label:"线下活动"}})],1)],1),r("el-form-item",{attrs:{label:"活动简介",prop:"introduction",required:""}},[r("el-input",{staticStyle:{width:"40%"},attrs:{type:"textarea"},model:{value:e.form.introduction,callback:function(t){e.$set(e.form,"introduction",t)},expression:"form.introduction"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确认")])],1)],1)],1)],1)},M=[],A={name:"RequestFirst",data:function(){return{form:{name:"",user:"",telephone:"",region:"",date1:"",date2:"",type:"",introduction:""},formRules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],user:[{required:!0,message:"请输入负责人",trigger:"blur"}],telephone:[{required:!0,message:"请输入负责人电话",trigger:"blur"}],region:[{required:!0,message:"请输入活动区域",trigger:"blur"}],date1:[{required:!0,message:"请输入活动日期",trigger:"blur"}],date2:[{required:!0,message:"请输入活动时间",trigger:"blur"}],type:[{required:!0,message:"请输入活动性质",trigger:"blur"}],introduction:[{required:!0,message:"请输入活动简介",trigger:"blur"}]}}},methods:{onSubmit:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$confirm("是否确认提交?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(r=t.sent,a=window.sessionStorage.getItem("number"),"confirm"!=r){t.next=13;break}return t.next=7,e.$http.post("/Home/requestFirst",{form:e.form,number:a});case 7:if(s=t.sent,o=s.data,200===o.meta.status){t.next=11;break}return t.abrupt("return",e.$message.error("提交失败"));case 11:e.$message.success("提交成功"),e.$refs.formRef.resetFields();case 13:case"end":return t.stop()}}),t)})))()}}},G=A,J=(r("15c4"),Object(l["a"])(G,T,M,!1,null,"421a7bf9",null)),K=J.exports,Q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/Home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("校友申请管理")]),r("el-breadcrumb-item",[e._v("申请列表")])],1),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:7}},[r("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getRequestList},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getRequestList},slot:"append"})],1)],1)],1),r("el-table",{attrs:{data:e.requestList,border:"",stripe:""}},[r("el-table-column",{attrs:{label:"#",type:"index"}}),r("el-table-column",{attrs:{label:"活动名称",prop:"name"}}),r("el-table-column",{attrs:{label:"负责人",prop:"user"}}),r("el-table-column",{attrs:{label:"电话",prop:"telephone"}}),r("el-table-column",{attrs:{label:"活动区域",prop:"region"}}),r("el-table-column",{attrs:{label:"活动日期",prop:"date1"}}),r("el-table-column",{attrs:{label:"活动具体时间",prop:"date2"}}),r("el-table-column",{attrs:{label:"活动性质",prop:"type"}}),r("el-table-column",{attrs:{label:"活动简介",prop:"introduction"}}),r("el-table-column",{attrs:{label:"状态",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:"未通过"===t.row.status?"danger":"success",effect:"dark","disable-transitions":""}},[e._v(e._s(t.row.status))])]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{effect:"dark",content:"修改",placement:"top-start",enterable:!1}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditDialog(t.row.user)}}})],1),r("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"top-start",enterable:!1}},[r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.removeRequestByUser(t.row.user)}}})],1),r("el-tooltip",{attrs:{effect:"dark",content:"审批",placement:"top-start",enterable:!1}},[r("el-button",{attrs:{type:"info",icon:"el-icon-s-claim",size:"mini"},on:{click:function(r){return e.changeRequestByUser(t.row.idrequest)}}})],1)]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[1,2,5,10],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"修改用户",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editDialogClosed}},[r("el-form",{ref:"editFormRef",attrs:{model:e.editForm,rules:e.formRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"活动名称",prop:"name",required:""}},[r("el-input",{staticStyle:{width:"40%"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),r("el-form-item",{attrs:{label:"负责人",prop:"user"}},[r("el-input",{staticStyle:{width:"40%"},attrs:{disabled:""},model:{value:e.editForm.user,callback:function(t){e.$set(e.editForm,"user",t)},expression:"editForm.user"}})],1),r("el-form-item",{attrs:{label:"电话",prop:"telephone",required:""}},[r("el-input",{staticStyle:{width:"40%"},model:{value:e.editForm.telephone,callback:function(t){e.$set(e.editForm,"telephone",t)},expression:"editForm.telephone"}})],1),r("el-form-item",{attrs:{label:"活动区域",prop:"region",required:""}},[r("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.editForm.region,callback:function(t){e.$set(e.editForm,"region",t)},expression:"editForm.region"}},[r("el-option",{attrs:{label:"旧校区",value:"旧校区"}}),r("el-option",{attrs:{label:"新校区",value:"新校区"}})],1)],1),r("el-form-item",{attrs:{label:"活动时间",required:""}},[r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{prop:"date1"}},[r("el-date-picker",{staticStyle:{width:"90%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.editForm.date1,callback:function(t){e.$set(e.editForm,"date1",t)},expression:"editForm.date1"}})],1)],1),r("el-col",{staticClass:"line date_w",attrs:{span:2}},[e._v("-")]),r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{prop:"date2"}},[r("el-time-picker",{staticStyle:{width:"90%"},attrs:{placeholder:"选择时间","value-format":"HH:mm:ss"},model:{value:e.editForm.date2,callback:function(t){e.$set(e.editForm,"date2",t)},expression:"editForm.date2"}})],1)],1)],1),r("el-form-item",{attrs:{label:"活动性质",prop:"type",required:""}},[r("el-radio-group",{model:{value:e.editForm.type,callback:function(t){e.$set(e.editForm,"type",t)},expression:"editForm.type"}},[r("el-radio",{attrs:{label:"申请入校"}}),r("el-radio",{attrs:{label:"线上活动"}}),r("el-radio",{attrs:{label:"线下活动"}})],1)],1),r("el-form-item",{attrs:{label:"活动简介",prop:"introduction",required:""}},[r("el-input",{staticStyle:{width:"40%"},attrs:{type:"textarea"},model:{value:e.editForm.introduction,callback:function(t){e.$set(e.editForm,"introduction",t)},expression:"editForm.introduction"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editRequestInfo()}}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"提示",visible:e.changeDialogVisible,width:"30%"},on:{"update:visible":function(t){e.changeDialogVisible=t}}},[r("el-form",{ref:"changeFormRef",attrs:{model:e.changeForm,rules:e.changeFormRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"id"}},[r("el-input",{staticStyle:{width:"40%"},attrs:{disabled:""},model:{value:e.changeForm.idrequest,callback:function(t){e.$set(e.changeForm,"idrequest",t)},expression:"changeForm.idrequest"}})],1),r("el-form-item",{attrs:{label:"状态"}},[r("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.changeForm.status,callback:function(t){e.$set(e.changeForm,"status",t)},expression:"changeForm.status"}},[r("el-option",{attrs:{label:"未通过",value:"未通过"}}),r("el-option",{attrs:{label:"通过",value:"通过"}})],1)],1)],1),r("el-button",{on:{click:function(t){e.changeDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.changeHandle()}}},[e._v("确 定")])],1)],1)},W=[],X={created:function(){this.getRequestList()},name:"RequestSecond",data:function(){return{queryInfo:{query:"",pageNum:1,pageSize:2},requestList:[],total:0,editDialogVisible:!1,editForm:{name:"",user:"",telephone:"",region:"",date1:"",date2:"",type:"",introduction:"",status:""},formRules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],user:[{required:!0,message:"请输入负责人",trigger:"blur"}],telephone:[{required:!0,message:"请输入负责人电话",trigger:"blur"}],region:[{required:!0,message:"请输入活动区域",trigger:"blur"}],date1:[{required:!0,message:"请输入活动日期",trigger:"blur"}],date2:[{required:!0,message:"请输入活动时间",trigger:"blur"}],type:[{required:!0,message:"请输入活动性质",trigger:"blur"}],introduction:[{required:!0,message:"请输入活动简介",trigger:"blur"}]},changeDialogVisible:!1,changeForm:{idrequest:"",status:""},changeFormRules:{}}},methods:{getRequestList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/Home/requestSecond",{params:e.queryInfo});case 2:if(r=t.sent,a=r.data,200===a.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("用户列表获取失败"));case 6:e.requestList=a.data,e.total=a.total;case 8:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getRequestList()},handleCurrentChange:function(e){this.queryInfo.pageNum=e,this.getRequestList()},editDialogClosed:function(){this.$refs.editFormRef.resetFields()},showEditDialog:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.editDialogVisible=!0,console.log(e),r.next=4,t.$http.get("/Home/requestSecond/"+e);case 4:if(a=r.sent,s=a.data,200!=!s.meta.status){r.next=8;break}return r.abrupt("return",t.$message.error("查询用户信息失败"));case 8:t.editForm=s.data[0];case 9:case"end":return r.stop()}}),r)})))()},editRequestInfo:function(){var e=this;this.$refs.editFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.put("/Home/requestSecond/"+e.editForm.user,{name:e.editForm.name,user:e.editForm.user,telephone:e.editForm.telephone,region:e.editForm.region,date1:e.editForm.date1,date2:e.editForm.date2,type:e.editForm.type,introduction:e.editForm.introduction});case 4:if(a=t.sent,s=a.data,200===s.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("修改用户信息失败"));case 8:e.$message.success("修改用户信息成功");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.editDialogVisible=!1,this.getRequestList()},removeRequestByUser:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(a=r.sent,"confirm"===a){r.next=5;break}return r.abrupt("return",t.$message.info("已经取消删除"));case 5:return r.next=7,t.$http.delete("/Home/requestSecond/"+e);case 7:if(s=r.sent,o=s.data,200===o.meta.status){r.next=11;break}return r.abrupt("return",t.$message.error("删除用户失败"));case 11:t.$message.success("删除用户成功"),t.getRequestList();case 13:case"end":return r.stop()}}),r)})))()},changeRequestByUser:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.changeDialogVisible=!0,r.next=3,t.$http.get("/Home/requestSecond/change/"+e);case 3:if(a=r.sent,s=a.data,200===s.meta.status){r.next=7;break}return r.abrupt("return",t.$message.error("获取用户失败"));case 7:t.changeForm=s.data[0];case 8:case"end":return r.stop()}}),r)})))()},changeHandle:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/Home/requestSecond/change",e.changeForm);case 2:if(r=t.sent,a=r.data,200===a.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("提交失败"));case 6:e.$message.success("审批成功"),e.changeDialogVisible=!1,e.getRequestList();case 9:case"end":return t.stop()}}),t)})))()}}},Y=X,Z=Object(l["a"])(Y,Q,W,!1,null,"3f9dcd84",null),ee=Z.exports,te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/Home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("学校动态管理")]),r("el-breadcrumb-item",[e._v("学校动态展示")])],1),r("el-card",{staticClass:"box-card"},[r("el-table",{attrs:{data:e.statesList,border:"",stripe:""}},[r("el-table-column",{attrs:{label:"#",type:"index"}}),r("el-table-column",{attrs:{label:"文件名",prop:"pdfName"}}),r("el-table-column",{attrs:{label:"时间",prop:"time"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{effect:"dark",content:"查看",placement:"top-start",enterable:!1}},[r("a",{attrs:{href:e.url+t.row.filename,target:"_blank"}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-reading",size:"mini"}})],1)])]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[1,2,5,10],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},re=[],ae={created:function(){this.getStateList()},name:"StateFirst",data:function(){return{queryInfo:{query:"",pageNum:1,pageSize:10},statesList:[],total:0,url:"http://localhost:5001/upload/doc/"}},methods:{getStateList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/Home/stateSecond",{params:e.queryInfo});case 2:if(r=t.sent,a=r.data,200===a.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("动态列表获取失败"));case 6:e.statesList=a.data,e.total=a.total;case 8:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getStateList()},handleCurrentChange:function(e){this.queryInfo.pageNum=e,this.getStateList()}}},se=ae,oe=Object(l["a"])(se,te,re,!1,null,null,null),ne=oe.exports,ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/Home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("学校动态管理")]),r("el-breadcrumb-item",[e._v("学校动态管理")])],1),r("el-card",{staticClass:"box-card"},[r("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.actionUrl,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"on-error":e.handleError,"file-list":e.fileList,"auto-upload":!1,headers:e.herderObject,accept:".pdf",limit:1}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传pdf文件，且只能单个上传 ")])],1),r("el-table",{attrs:{data:e.statesList,border:"",stripe:""}},[r("el-table-column",{attrs:{label:"#",type:"index"}}),r("el-table-column",{attrs:{label:"文件名",prop:"pdfName"}}),r("el-table-column",{attrs:{label:"时间",prop:"time"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{effect:"dark",content:"修改",placement:"top-start",enterable:!1}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditDialog(t.row.id)}}})],1),r("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"top-start",enterable:!1}},[r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.removeRequestById(t.row.id)}}})],1)]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[1,2,5,10],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"修改用户",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editDialogClosed}},[r("el-form",{ref:"editFormRef",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"编号",prop:"id"}},[r("el-input",{attrs:{disabled:""},model:{value:e.editForm.id,callback:function(t){e.$set(e.editForm,"id",t)},expression:"editForm.id"}})],1),r("el-form-item",{attrs:{label:"动态名称",prop:"pdfName"}},[r("el-input",{model:{value:e.editForm.pdfName,callback:function(t){e.$set(e.editForm,"pdfName",t)},expression:"editForm.pdfName"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editUserInfo()}}},[e._v("确 定")])],1)],1)],1)},le=[],ue=(r("99af"),{created:function(){this.getStateList()},name:"StateSecond",data:function(){return{actionUrl:"http://127.0.0.1:5001/upload",fileList:[],herderObject:{Authorization:window.sessionStorage.getItem("token")},queryInfo:{query:"",pageNum:1,pageSize:10},statesList:[],total:0,editDialogVisible:!1,editForm:{id:"",pdfName:""},editFormRules:{id:[{required:!0,message:"请输入用户名",trigger:"blur"}],pdfName:[{required:!0,message:"请输入学院",trigger:"blur"}]}}},methods:{handleRemove:function(e,t){console.log(e,"@@",t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.error("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},handleSuccess:function(e,t,r){this.$message.success("上传成功"),console.log(e,t,r)},handleError:function(e,t,r){console.log("上传失败")},submitUpload:function(){this.$refs.upload.submit()},getStateList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/Home/stateSecond",{params:e.queryInfo});case 2:if(r=t.sent,a=r.data,200===a.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("动态列表获取失败"));case 6:e.statesList=a.data,e.total=a.total;case 8:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getStateList()},handleCurrentChange:function(e){this.queryInfo.pageNum=e,this.getStateList()},editDialogClosed:function(){this.$refs.editFormRef.resetFields()},showEditDialog:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.editDialogVisible=!0,r.next=3,t.$http.get("/Home/stateSecond/"+e);case 3:if(a=r.sent,s=a.data,200!=!s.meta.status){r.next=7;break}return r.abrupt("return",t.$message.error("查询用户信息失败"));case 7:t.editForm=s.data[0];case 8:case"end":return r.stop()}}),r)})))()},editUserInfo:function(){var e=this;this.$refs.editFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.put("/Home/stateSecond/"+e.editForm.id,{pdfName:e.editForm.pdfName});case 4:if(a=t.sent,s=a.data,200===s.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("修改用户信息失败"));case 8:e.$message.success("修改用户信息成功");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.editDialogVisible=!1,this.getStateList()},removeRequestById:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(a=r.sent,"confirm"===a){r.next=5;break}return r.abrupt("return",t.$message.info("已经取消删除"));case 5:return r.next=7,t.$http.delete("/Home/stateSecond/"+e);case 7:if(s=r.sent,o=s.data,console.log(o),200===o.meta.status){r.next=12;break}return r.abrupt("return",t.$message.error("删除用户失败"));case 12:t.$message.success("删除用户成功"),t.getStateList();case 14:case"end":return r.stop()}}),r)})))()}}}),ce=ue,me=Object(l["a"])(ce,ie,le,!1,null,null,null),de=me.exports,pe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/Home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("校友风采管理")]),r("el-breadcrumb-item",[e._v("校友风采")])],1),r("el-card",{staticClass:"box-card"},[r("el-table",{attrs:{data:e.showUsersList,border:"",stripe:""}},[r("el-table-column",{attrs:{label:"#",type:"index"}}),r("el-table-column",{attrs:{label:"图片"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("img",{staticStyle:{width:"150px"},attrs:{src:e.imgUrl+t.row.picName,alt:""}})]}}])}),r("el-table-column",{attrs:{label:"姓名",prop:"name"}}),r("el-table-column",{attrs:{label:"简介",prop:"info"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{effect:"dark",content:"查看",placement:"top-start",enterable:!1}},[r("a",{attrs:{href:e.pdfUrl+t.row.pdfName,target:"_blank"}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-reading",size:"mini"}})],1)])]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[1,2,5,10],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},ge=[],fe={created:function(){this.getShowList()},name:"ShowFirst",data:function(){return{queryInfo:{query:"",pageNum:1,pageSize:2},showUsersList:[],total:0,imgUrl:"http://localhost:5001/upload/pic/pic1/",pdfUrl:"http://localhost:5001/upload/doc2/"}},methods:{getShowList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/Home/showFirst",{params:e.queryInfo});case 2:if(r=t.sent,a=r.data,200===a.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("用户列表获取失败"));case 6:e.showUsersList=a.data,console.log(e.showUsersList),e.total=a.total;case 9:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getShowList()},handleCurrentChange:function(e){this.queryInfo.pageNum=e,this.getShowList()}}},be=fe,he=Object(l["a"])(be,pe,ge,!1,null,"7560ba33",null),ve=he.exports,we=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/Home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("校友风采管理")]),r("el-breadcrumb-item",[e._v("校友风采管理")])],1),r("el-card",[r("el-form",{ref:"showRef",staticStyle:{border:"1px solid rgb(225, 225, 225, 0.5)","padding-left":"10px"},attrs:{model:e.showForm,"label-width":"80px;"}},[r("el-form-item",{attrs:{label:"图片"}},[r("el-upload",{ref:"picUpload",staticClass:"avatar-uploader",attrs:{action:e.picUrl,"on-change":e.handlePreview,"before-upload":e.beforeAvatarUpload,"auto-upload":!1,limit:1,multiple:!1}},[e.imageUrl?r("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"姓名"}},[r("el-input",{staticStyle:{width:"30%"},model:{value:e.showForm.name,callback:function(t){e.$set(e.showForm,"name",t)},expression:"showForm.name"}})],1),r("el-form-item",{attrs:{label:"简介"}},[r("el-input",{staticStyle:{width:"40%"},model:{value:e.showForm.info,callback:function(t){e.$set(e.showForm,"info",t)},expression:"showForm.info"}})],1),r("el-form-item",{attrs:{label:"文件"}},[r("el-upload",{ref:"pdfUpload",staticClass:"upload-demo",attrs:{action:e.actionUrl,"file-list":e.fileList,"auto-upload":!1,headers:e.herderObject,accept:".pdf",limit:1}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传pdf文件，且只能单个上传 ")])],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.formSubmit}},[e._v("立即创建")])],1)],1),r("el-table",{attrs:{data:e.showUsersList,border:"",stripe:""}},[r("el-table-column",{attrs:{label:"#",type:"index"}}),r("el-table-column",{attrs:{label:"图片"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("img",{staticStyle:{width:"150px"},attrs:{src:e.imgUrl+t.row.picName,alt:""}})]}}])}),r("el-table-column",{attrs:{label:"姓名",prop:"name"}}),r("el-table-column",{attrs:{label:"简介",prop:"info"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{effect:"dark",content:"修改",placement:"top-start",enterable:!1}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditDialog(t.row.id)}}})],1),r("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"top-start",enterable:!1}},[r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.removeRequestById(t.row.id)}}})],1)]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[1,2,5,10],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"修改用户",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editDialogClosed}},[r("el-form",{ref:"editFormRef",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"编号",prop:"id"}},[r("el-input",{attrs:{disabled:""},model:{value:e.editForm.id,callback:function(t){e.$set(e.editForm,"id",t)},expression:"editForm.id"}})],1),r("el-form-item",{attrs:{label:"姓名",prop:"name"}},[r("el-input",{model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),r("el-form-item",{attrs:{label:"简介",prop:"info"}},[r("el-input",{model:{value:e.editForm.info,callback:function(t){e.$set(e.editForm,"info",t)},expression:"editForm.info"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editShowInfo()}}},[e._v("确 定")])],1)],1)],1)},Fe=[],xe={created:function(){this.getShowList()},name:"ShowSecond",data:function(){return{showForm:{},picUrl:"http://127.0.0.1:5001/Home/showSecond/upload1",actionUrl:"http://127.0.0.1:5001/Home/showSecond/upload2",imageUrl:"",dialogImageUrl:"",dialogVisible:!1,herderObject:{Authorization:window.sessionStorage.getItem("token")},fileList:[],queryInfo:{query:"",pageNum:1,pageSize:2},showUsersList:[],total:0,imgUrl:"http://localhost:5001/upload/pic/pic1/",pdfUrl:"http://localhost:5001/upload/doc2/",editDialogVisible:!1,editForm:{id:"",name:"",info:""},editFormRules:{id:[{required:!0,message:"请输入用户名",trigger:"blur"}],name:[{required:!0,message:"请输入学院",trigger:"blur"}],info:[{required:!0,message:"请输入学院",trigger:"blur"}]}}},methods:{handlePreview:function(e,t){var r=new Blob([t.row]);this.imageUrl=URL.createObjectURL(r),this.dialogImageUrl=this.imageUrl},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,r=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&r},formSubmit:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/Home/showSecond",e.showForm);case 2:r=t.sent,a=r.data,200==a.meta.status?(e.$refs.picUpload.submit(),e.$refs.pdfUpload.submit()):e.$message.error("上传失败");case 5:case"end":return t.stop()}}),t)})))()},getShowList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/Home/showFirst",{params:e.queryInfo});case 2:if(r=t.sent,a=r.data,200===a.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("用户列表获取失败"));case 6:e.showUsersList=a.data,console.log(e.showUsersList),e.total=a.total;case 9:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getShowList()},handleCurrentChange:function(e){this.queryInfo.pageNum=e,this.getShowList()},editDialogClosed:function(){this.$refs.editFormRef.resetFields()},showEditDialog:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.editDialogVisible=!0,r.next=3,t.$http.get("/Home/showSecond/"+e);case 3:if(a=r.sent,s=a.data,200!=!s.meta.status){r.next=7;break}return r.abrupt("return",t.$message.error("查询用户信息失败"));case 7:t.editForm=s.data[0];case 8:case"end":return r.stop()}}),r)})))()},editShowInfo:function(){var e=this;this.$refs.editFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.put("/Home/showSecond/"+e.editForm.id,{name:e.editForm.name,info:e.editForm.info});case 4:if(a=t.sent,s=a.data,200===s.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("修改用户信息失败"));case 8:e.$message.success("修改用户信息成功");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.editDialogVisible=!1,this.getShowList()},removeRequestById:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(a=r.sent,"confirm"===a){r.next=5;break}return r.abrupt("return",t.$message.info("已经取消删除"));case 5:return r.next=7,t.$http.delete("/Home/showSecond/"+e);case 7:if(s=r.sent,o=s.data,console.log(o),200===o.meta.status){r.next=12;break}return r.abrupt("return",t.$message.error("删除用户失败"));case 12:t.$message.success("删除用户成功"),t.getShowList();case 14:case"end":return r.stop()}}),r)})))()}}},ye=xe,ke=(r("6ea0"),Object(l["a"])(ye,we,Fe,!1,null,"530aeae4",null)),$e=ke.exports,Se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/Home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("论坛管理")]),r("el-breadcrumb-item",[e._v("论坛")])],1),r("el-card",{staticClass:"box-card card"},[r("div",{staticClass:"ForumFirst_header"},[r("el-button",{attrs:{type:"",icon:"el-icon-edit",circle:""},on:{click:e.showEditDialog}}),r("el-button",{attrs:{type:"",icon:"el-icon-picture-outline",circle:""},on:{click:e.showEditDialog1}})],1),e._l(e.data,(function(t,a){return r("div",{key:a,staticClass:"box"},[r("div",{staticClass:"box_left"},[r("div",{staticClass:"name"},[e._v(e._s(t.name))]),r("div",{staticClass:"photo"},[r("img",{attrs:{src:e.photoImg+t.photo,alt:""}})])]),r("div",{staticClass:"box_right"},[r("div",{staticClass:"article"},[r("span",[e._v(e._s(t.article))])]),r("div",{staticClass:"picture"},[null!=t.pic1?r("el-image",{staticClass:"img",attrs:{src:e.img1+t.pic1}}):e._e(),null!=t.pic2?r("el-image",{staticClass:"img",attrs:{src:e.img2+t.pic2}}):e._e(),null!=t.pic3?r("el-image",{staticClass:"img",attrs:{src:e.img3+t.pic3}}):e._e(),null!=t.pic4?r("el-image",{staticClass:"img",attrs:{src:e.img4+t.pic4}}):e._e()],1),r("div",{staticClass:"footer"},[r("div",{staticClass:"footer_left"},[e._v(e._s(t.time))]),r("div",{staticClass:"footer_right"},[r("div",{staticClass:"footer_right1"},[r("i",{staticClass:"el-icon-star-on iStyle",on:{click:function(r){return e.handleGive(t.give,t.time)}}},[e._v(e._s(t.give))])]),r("div",{staticClass:"footer_right2"})])])])])}))],2),r("el-dialog",{attrs:{title:"发布文字",visible:e.editDialogVisible,width:"70%"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[r("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"发布信息"}},[r("el-input",{model:{value:e.editForm.article,callback:function(t){e.$set(e.editForm,"article",t)},expression:"editForm.article"}})],1)],1),r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.fontSubmit}},[e._v("确 定")])],1),r("el-dialog",{attrs:{title:"提示",visible:e.editDialogVisible2,width:"70%"},on:{"update:visible":function(t){e.editDialogVisible2=t}}},[r("el-form",{ref:"editForm1",attrs:{model:e.editForm2,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"发布信息"}},[r("el-input",{model:{value:e.editForm2.article,callback:function(t){e.$set(e.editForm2,"article",t)},expression:"editForm2.article"}})],1),r("el-form-item",{attrs:{label:"图片"}},[r("el-upload",{ref:"pic1Upload",staticClass:"upload-demo",attrs:{"list-type":"picture-card",action:e.actionUrl1,"auto-upload":!1,"on-change":e.handleChao,headers:e.herderObject,accept:".jpg",limit:1}})],1),r("el-form-item",{attrs:{label:"图片"}},[r("el-upload",{ref:"pic2Upload",staticClass:"upload-demo",attrs:{"list-type":"picture-card",action:e.actionUrl2,"auto-upload":!1,"on-change":e.handleChao,headers:e.herderObject,accept:".jpg",limit:1}})],1),r("el-form-item",{attrs:{label:"图片"}},[r("el-upload",{ref:"pic3Upload",staticClass:"upload-demo",attrs:{"list-type":"picture-card",action:e.actionUrl3,"auto-upload":!1,"on-change":e.handleChao,headers:e.herderObject,accept:".jpg",limit:1}})],1),r("el-form-item",{attrs:{label:"图片"}},[r("el-upload",{ref:"pic4Upload",staticClass:"upload-demo",attrs:{"list-type":"picture-card",action:e.actionUrl4,"auto-upload":!1,"on-change":e.handleChao,headers:e.herderObject,accept:".jpg",limit:1}})],1)],1),r("el-button",{on:{click:function(t){e.editDialogVisible2=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.submit1}},[e._v("确 定")])],1)],1)},_e=[],Re={created:function(){this.getForum()},name:"ForumFirst",data:function(){return{editDialogVisible:!1,editForm:{},editDialogVisible2:!1,editForm2:{},actionUrl1:"http://127.0.0.1:5001/Home/ForumSecond/upload1",actionUrl2:"http://127.0.0.1:5001/Home/ForumSecond/upload2",actionUrl3:"http://127.0.0.1:5001/Home/ForumSecond/upload3",actionUrl4:"http://127.0.0.1:5001/Home/ForumSecond/upload4",herderObject:{Authorization:window.sessionStorage.getItem("token")},data:{},photoImg:"http://localhost:5001/upload/pic/pic1/",img1:"http://localhost:5001/upload/forum/pic1/",img2:"http://localhost:5001/upload/forum/pic2/",img3:"http://localhost:5001/upload/forum/pic3/",img4:"http://localhost:5001/upload/forum/pic4/",give:""}},methods:{handleGive:function(e,t){var r=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){var s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,r.$http.post("/Home/ForumSecond/give",{give:e,time:t});case 2:s=a.sent,o=s.data,200==o.meta.status&&r.getForum();case 5:case"end":return a.stop()}}),a)})))()},getForum:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/Home/ForumSecond");case 2:r=t.sent,a=r.data,200!==a.meta.status?e.$message.error("数据获取失败"):e.data=a.data;case 5:case"end":return t.stop()}}),t)})))()},showEditDialog:function(){this.editDialogVisible=!0},showEditDialog1:function(){this.editDialogVisible2=!0},handleChao:function(e,t){t.length>=1&&this.$message.warning("每次选图最多为1")},fontSubmit:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=window.sessionStorage.getItem("number"),console.log(r),t.next=4,e.$http.post("/Home/ForumSecond",{data:e.editForm,number:r});case 4:a=t.sent,s=a.data,200!==s.meta.status?e.$message.error("文字发布失败"):(e.$message.success("文字发布失败成功"),e.editDialogVisible=!1,e.getForum());case 7:case"end":return t.stop()}}),t)})))()},submit1:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=window.sessionStorage.getItem("number"),t.next=3,e.$http.post("/Home/ForumSecond/up",{data:e.editForm2,number:r});case 3:a=t.sent,s=a.data,200!==s.meta.status?e.$message.error("图片发布失败"):(e.$refs.pic1Upload.submit(),e.$refs.pic2Upload.submit(),e.$refs.pic3Upload.submit(),e.$refs.pic4Upload.submit(),e.$message.success("图片发布成功"),e.editDialogVisible2=!1,e.getForum());case 6:case"end":return t.stop()}}),t)})))()}}},qe=Re,Ce=(r("0677"),Object(l["a"])(qe,Se,_e,!1,null,"04d7a4b8",null)),Ue=Ce.exports,je=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/Home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("论坛管理")]),r("el-breadcrumb-item",[e._v("论坛")])],1),r("el-card",{staticClass:"box-card"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.ForumList,"max-height":"800"}},[r("el-table-column",{attrs:{fixed:"",label:"#",type:"index",width:"150"}}),r("el-table-column",{attrs:{prop:"time",label:"时间",width:"200"}}),r("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"}}),r("el-table-column",{attrs:{prop:"article",label:"文字",width:"300"}}),r("el-table-column",{attrs:{prop:"pic1",label:"图片1",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("img",{staticStyle:{width:"150px"},attrs:{src:e.img1+t.row.pic1,alt:""}})]}}])}),r("el-table-column",{attrs:{prop:"pic2",label:"图片2",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("img",{staticStyle:{width:"150px"},attrs:{src:e.img2+t.row.pic2,alt:""}})]}}])}),r("el-table-column",{attrs:{prop:"pic3",label:"图片3",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("img",{staticStyle:{width:"150px"},attrs:{src:e.img3+t.row.pic3,alt:""}})]}}])}),r("el-table-column",{attrs:{prop:"pic4",label:"图片4",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("img",{staticStyle:{width:"150px"},attrs:{src:e.img4+t.row.pic4,alt:""}})]}}])}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(r){return e.handleRemove(t.row.idforum)}}},[e._v(" 删除 ")])]}}])})],1)],1)],1)},Le=[],Oe={created:function(){this.getForum()},name:"ForumSecond",data:function(){return{ForumList:[],img1:"http://localhost:5001/upload/forum/pic1/",img2:"http://localhost:5001/upload/forum/pic2/",img3:"http://localhost:5001/upload/forum/pic3/",img4:"http://localhost:5001/upload/forum/pic4/"}},methods:{getForum:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/Home/ForumSecond");case 2:r=t.sent,a=r.data,200!==a.meta.status?e.$message.error("数据获取失败"):(e.ForumList=a.data,e.$message.success("数据获取成功"));case 5:case"end":return t.stop()}}),t)})))()},handleRemove:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var a,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e),r.next=3,t.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 3:if(a=r.sent,"confirm"===a){r.next=6;break}return r.abrupt("return",t.$message.info("已经取消删除"));case 6:return r.next=8,t.$http.delete("/Home/ForumSecond/"+e);case 8:if(s=r.sent,o=s.data,200===o.meta.status){r.next=12;break}return r.abrupt("return",t.$message.error("删除用户失败"));case 12:t.$message.success("删除用户成功"),t.getForum();case 14:case"end":return r.stop()}}),r)})))()}}},Ie=Oe,De=Object(l["a"])(Ie,je,Le,!1,null,"36961d4c",null),ze=De.exports;a["default"].use(m["a"]);var He=[{path:"/",redirect:"/Login"},{path:"/Login",name:"Login",component:v},{path:"/Register",name:"Register",component:$},{path:"/Home",name:"Home",component:U,redirect:"/Home/ForumFirst",children:[{path:"UserFirst",name:z,component:z,meta:{isAuth:!0}},{path:"UserSecond",name:P,component:P},{path:"RequestFirst",name:K,component:K},{path:"RequestSecond",name:ee,component:ee,meta:{isAuth:!0}},{path:"StateFirst",name:ne,component:ne},{path:"StateSecond",name:de,component:de,meta:{isAuth:!0}},{path:"ShowFirst",name:ve,component:ve},{path:"ShowSecond",name:$e,component:$e,meta:{isAuth:!0}},{path:"ForumFirst",name:Ue,component:Ue},{path:"ForumSecond",name:ze,component:ze,meta:{isAuth:!0}}]}],Ve=new m["a"]({routes:He});Ve.beforeEach((function(e,t,r){if("/Login"===e.path)return r();var a=window.sessionStorage.getItem("token");if(!a)return r("/Login");r()}));var Ne=Ve,Ee=r("5c96"),Be=r.n(Ee),Pe=(r("0fae"),r("aede"),r("bc3a")),Te=r.n(Pe);Te.a.defaults.baseURL="http://127.0.0.1:5001",Te.a.interceptors.request.use((function(e){return console.log(e),e.headers.Authorization=window.sessionStorage.getItem("token"),e})),a["default"].prototype.$http=Te.a,a["default"].prototype.$message=Be.a.Message,a["default"].prototype.$confirm=Be.a.MessageBox.confirm,a["default"].config.productionTip=!1,a["default"].use(Be.a),new a["default"]({router:Ne,render:function(e){return e(c)}}).$mount("#app")},6990:function(e,t,r){"use strict";r("b434")},"6d63":function(e,t,r){},"6ea0":function(e,t,r){"use strict";r("2fb3")},aede:function(e,t,r){},b0d3:function(e,t,r){"use strict";r("6d63")},b434:function(e,t,r){},cf05:function(e,t,r){e.exports=r.p+"img/logo.82b9c7a5.png"},e558:function(e,t,r){}});
//# sourceMappingURL=app.775f44b2.js.map